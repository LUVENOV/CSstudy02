# 2. 네트워크

## 2.1 네트워크 기초

### 2.1.1 처리량과 지연시간

- 네트워크 : 노드와 링크가 서 연결되어 있으며 리소스를 공유하는 집합
- 노드 : 서버, 라우터, 스위치

- 처리량 : 링크를 통해 전달되는 단위 시간당 데이터양
  - 단위 : bps (bits per second)
  - 서버 트래픽, 네트워크 장치간의 대역폭, 에러, 네트워크 토폴로지, 장치 하드웨어 스팩에 영향받음
  - 대역폭 : 주어진 시간 동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수

* 지연 시간 : 요청이 처리되는 시간으로 어떠한 메시지가 두 장치 사이를 왕복하는데 걸린 시간으로 전송 + 요청 시간을 의미

  - 매체 타입 (무/유선), 지리적 거리, 전송 프로토콜, 패킷 크기, 라우터의 패킷 처리시간에 영향받음
  - 측정 방법 : 핑 시간
  - 단위 : ms

* 위 개선 방안

  - 캐싱
  - 전송 프로토콜 (TCP, UDP)
  - 서비스 품질(QoS)

* **프로토콜 (규약) :** 컴퓨터나 원거리 통신 장비에서 메세지를 주고 받는 양식과 규칙 체계/약속

> > 송신자와 수신자 사이의 약속으로 데이터 구조, 의미, 속도 등을 미리 정해두는 것

#### 프로토콜의 요소

- **구문(Syntax)** : 전송하고자 하는 **데이터의 형식(Format), 부호화(Coding), 신호 레벨(Signal Level)** 등을 규정
- **의미(Semantics)** : 두 기기 간의 효율적이고 정확한 정보 전송을 위한 협조 사항과 오류 관리를 위한 제어 정보를 규정
- **시간(Timing)** : 두 기기 간의 통신 속도, 메시지의 순서 제어 등을 규정

#### **프로토콜의 기능**

- **단편화(Fragmentation)와 재합성(Assembly) : 조각화**

단편화 : 송신 측에서는 긴 데이터 블록을 손쉽게 전송할 수 있도록 크기가 똑같은 작은 블록으로 나누어 전송

재합성 : 수신 측에서 쪼개진 작은 데이터 블록을 재합성하여 원래의 메시지로 복원하는 기능

- **캡슐화(Encapsulation)**

각 프로토콜에 적합한 데이터 블록을 만들려고 데이터에 정보를 추가하는 것

플래그, 주소, 제어 정보, 오류 검출 부호 등을 부착하는 기능

- **연결 제어(Connection Control)**

비연결 데이터 전송(데이터그램)과 연결 위주 데이터 전송(가상회선)을 위한 통신로를 개설·유지·종결하는 기능

- **흐름 제어(Flow Control)**

데이터양이나 통신속도 등이 수신 측의 처리 능력을 초과하지 않도록 조정하는 기능

- **오류 제어(Error Control)**

데이터 전송 중 발생할 수 있는 오류나 착오 등을 검출하고 정정하는 기능

- **순서 결정(Sequencing)**

연결 위주의 데이터를 전송할 때 송신 측이 보내는 데이터 단위 순서대로 수신 측에 전달하는 기능

- **주소 설정(Addressing)**

발생지, 목적지 등의 주소를 명기하여 데이터를 정확하게 전달하는 기능

- **동기화(Synchronization)**

두 통신 객체의 상태(시작, 종류, 검사 등)를 일치시키는 기능

- **다중화(Multiplexing)**

하나의 통신로를 여러 개로 나누거나 회선 여러 개를 하나의 통신로로 변환시켜 다수의 가입자가 동시에 사할 수 있도록 하는 기능

- **전송 서비스(Transmission Service)**

통신 객체를 사용하기 쉽도록 별도로 추가 서비스(패리티 검사, 보안도, 서비스 등급, 우선순위 등)를 제공하는 기능

---

### 2.1.2 네트워크 토폴로지와 병목현상

##### 네트워크 토폴로지

: 노드와 링크가 어떻게 배치되어있는지에 대한 방식이자 연결형태

네트워크 디바이스 수, 네트워크 링크의 대역폭, 네트워크 경로의 디바이스 간 거리 등을 포함함

- 트리 토폴로지

  - 계층형 토폴로지
  - 노드의 추가, 삭제가 쉬움
  - 특정 노드의 트래픽이 집중될 때 하위 노드에 영향을 미칠 수 있음

- 버스 토폴로지

  - 중앙 통신회선 하나에 여러개의 노드가 연결되어 공유하는 너트워크 구성
  - LAN에 사용
  - 설치비용이 적고 신뢰성 우수, 중앙통신회선에 노드 추가 삭제가 쉬움
  - 노드 수 증가시 배선 트래픽 증가, 스푸핑이 가능한 문제
  - 스푸핑 : LAN상 송신부의 패킷을 관련없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비되거나 속여서 해당 패킷이 악의적인 노드에 오도록 처리하는 것

- 스타 토폴로지

  - 중앙에 있는 모든 노드에 연결된 네트워크 구성
  - 노드 추가하거나 에러를 탐지학 쉽고 패킷 충돌 발생 가능성이 적음
  - 에러 발생이 쉬우며 장애 노드가 중앙 노드가 아니면 미치는 영향이 크지 않음
  - 그러나 중앙 노드가 장애 발생시 모든 네트워크가 중단되되며 설치 비용이 고가

- 링형 토폴로지

  - 각 노드가 옆 두 노드와 연결하여 전체적으로 고리 형태를 이루는 네트워크 구성
  - 노드 수가 증가되어도 손실이 없고 충돌 가능성이 적음
  - 노드 고장 발견을 쉽게 찾을 수 있음
  - 네트워크 구성 변경이 어렵고 회선에 장애 생기면 전체 네트워크에 영향

- 메시 토폴로지
  - 모든 노드가 다른 노드에 그물망처럼 연결된 구조
  - 노드에 장애가 발생해도 경로가 많아 문제가 없으며 트래픽 분산 처리 가능
  - 노드 추가 어렵고 구축 및 운용 비용이 고가

\*\* 병목현상을 찾을 시 토폴로지가 중요한 기준이 됨

---

### 2.1.3 네트워크 분류

- LAN : 건물, 캠퍼스
- MAN : 도시
- WAN : 국가, 대륙

**LAN : Physical & 브로드캐스팅 범위 안**
**WAN : Logical & 브로드캐스팅 범위 밖**

---

### 2.1.4 네트워크 성능 분석 명령어

#### 병목 현상

: 전체 시스템의 성능이나 용량이 하나의 구성요소로 인해 제한을 받는 현상

- 병목현상의 원인

  - 네트워크 대역 폭
  - 네트워크 토폴로지
  - 서버 CPU, 메모리 사용량
  - 비효율적인 네트워크 구성

- 원인 파악하는 법
  - 네트워크 관련 테스트 / 네트워크 무관한 테스트 구분하여 발생 원인이 네트워크인지 파악
  - 이후 네트워크 성능 분석

### 사용 명령어

- Ping

  - Packet INternet Grouper
  - 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어
  - 이를 통해 해당 노드의 패킷 수신 상태와 도달하기 까지의 시간 등을 파악 > 해당 노드까지 네트워크가 잘 연결되어있는지 확인
  - ICMP 프로토콜을 통해 동작하여 이를 지원하지 않는 기기나 ICMP를 차단하는 대상인 경우 ping 테스팅 불가

- 관련 메서드 : icmp echo request - icmp echo reply

\\
원래는 PING 프로그램이 echo 요청을 하면 대상이 살아있을 때 응답을 해줘야 되는데 나쁜 목적으로 사용하는 일이 있기 때문에 요청이 무시되는 경우도 있다. 일단 해킹의 대상이 되는 장비가 살아있는지 확인하는 용도로 사용될 수 있기에, 만약 ping 응답이 없다면 장비가 꺼진 것인지, 라우팅이 연결안된 것인지, ping 응답을 거부하는 것인지 등을 먼저 확인해야 한다. 그리고, ping 을 과도하게 보내는 방법으로 DDoS 공격을 할 수 있기에 무시하도록 설정하는 경우가 많다. 참고로 개인용 윈도우는 ping 을 무시하도록 설정되어 있고, 굳이 필요하면 찾아서 켜야 한다.
\\

- netstat

  - 접속되어 있는 서비스들의 네트워크 상태를 표시하는데 사용되며 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등의 리스트를 보여줌.
  - 주로 서비스의 포트가 열려있는지 확인할 때 씀

- nslookup

  - DNS에 관련 된 내용을 확인
  - 특정 도메인에 매핑된 IP를 확인하기 위해 사용
  - http 주소 & IP 주소!

- tracert (Linux : traceoute)
  - 목적지 노드까지 네트워크 경로를 확인하는 명령어
  - 목적지 노드까지 구간 (홉) 중 어느 구간에서 응답이 느려지는지 확인 가능
  - ping과 마찬가지로 목적지에 ICMP 패킷을 보내는 방식으로 작동
  - 패킷 이동 경로, 라우터 정보, 경로 도착 시간을 알 수 있다.
  - TTL (Time To Live) : 패킷이 폐기되기 전 최대 몇 개의 홉을 이동할 수 있는지 명시한 정보

---

### 2.1.5 네트워크 프로토콜 표준화

네트워크 프로토콜이란 상이한 소프트웨어와 하드웨어를 사용하는 다른 장치들끼리 데이터를 주고받기 위해데이터 서식 지정 및 처리를 위한 규칙을 설정한 공통의 인터페이스 (by IEEE, IETF)

== 공통언어

- IEEE802.3 : 유선 LAN 프로토콜

- HTTP : 웹을 접속할 때의 서로 약속된 인터페이스, 이를 통해 웹서비스를 기반으로 노드들은 데이터를 주고받음
